%div.button-bar
  - if signed_in?
    %div.dropdown
      %button.pill-button-filled.dropdown-toggle{:id => "upload-button", :data => {:toggle => "dropdown"}, :href => "#"}
        %i.icon.ion-plus-round

      %ul.dropdown-menu.dropdown-menu-right{:aria => {:labelledby => "upload-buton"}}
        %li
          =link_to new_video_path do
            %i.icon.ion-ios-film
            %span.dropdown-button-title
              Video
            %span.dropdown-button-text
              Upload your new masterpiece.
        %li
          =link_to new_move_path do
            %i.icon.ion-android-hand
            %span.dropdown-button-title
              Move
            %span.dropdown-button-text
              Add a new move to the database.
        %li
          =link_to new_move_path do
            %i.icon.ion-ios-lightbulb
            %span.dropdown-button-title
              Idea
            %span.dropdown-button-text
              Capture that amazing thought you just had.
        %li
          =link_to instagram_path do
            %i.icon.ion-social-instagram
            %span.dropdown-button-title
              Import from Instagram
            %span.dropdown-button-text
              Share with everyone.

  - if signed_in?
    %div.dropdown
      %span.screen-reader-text
        = link_to "Notifications (#{current_user.new_notifications.count})", notifications_path
      - if current_user.new_notifications.present?
        %button.pill-button-new-notification.dropdown-toggle{:id => "notifications-button", :data => {:toggle => "dropdown"}, :href => "#"}
          %i.icon.ion-android-notifications
      - else
        %button.pill-button-outline.dropdown-toggle{:id => "notifications-button", :data => {:toggle => "dropdown"}, :href => "#"}
          %i.icon.ion-android-notifications

      %ul.dropdown-menu.dropdown-menu-right{:aria => {:labelledby => "notifications-button"}}
        %li.notification-header
          %span.notification-count
            #{current_user.new_notifications.count}
          new #{"notification".pluralize(current_user.new_notifications.count)}

          - if current_user.new_notifications.present?
            = render current_user.notifications
        -if current_user.new_notifications.present?
          %li.mark-as-read-button
            =link_to mark_all_read_notifications_path, method: :post do
              Mark all as read

  - if signed_in?
    //= link_to current_user do
    %div.dropdown
      %button.pill-button-outline.dropdown-toggle{:id => "profile-button", :data => {:toggle => "dropdown"}, :href => "#"}
        %span{:style => "background: url(#{current_user.gravatar_url}) no-repeat 0 0;  background-size: contain"}
        = current_user.username
        %i.icon.ion-arrow-down-b
      %ul.dropdown-menu.dropdown-menu-right{:aria => {:labelledby => "profile-button"}}
        %li
          = link_to current_user do
            %i.icon.ion-person
            %span.dropdown-button-title
              Your profile
            %span.dropdown-button-text
              Check out and edit your profile.
        %li
          = link_to edit_user_path(current_user) do
            %i.icon.ion-gear-b
            %span.dropdown-button-title
              Settings
            %span.dropdown-button-text
              Fine tune the settings to your liking.
        %li.last
          = link_to sign_out_path, method: :delete do
            %i.icon.ion-log-out
            %span.dropdown-button-title
              Sign out
            %span.dropdown-button-text
              See ya!
  - else
    = link_to "Sign in", sign_in_path, class: "pill-button-outline"
    = link_to "Sign up", sign_up_path, class: "pill-button-outline"
